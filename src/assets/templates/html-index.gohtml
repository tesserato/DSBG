<!DOCTYPE html>
<html lang="{{.Settings.Lang}}">

<head>
    {{.Settings.AdditionalElementsTop}}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ .Settings.DescriptionMarkdown }}">
    <title>{{.Settings.Title}}</title>
    <link rel="stylesheet" href="style.css?v={{.Settings.BuildVersion}}">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="canonical" href="{{ .Settings.BaseUrl }}/index.html">
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/{{ .Settings.HighlightTheme }}.min.css">
    <script src="https://unpkg.com/lunr/lunr.min.js"></script>
    <script src="search.js?v={{.Settings.BuildVersion}}"></script>

    <!-- JSON-LD WebSite Schema -->
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "url": "{{ .Settings.BaseUrl }}/",
  "name": "{{ .Settings.Title }}"
}
    </script>
</head>

<body>
    <header>
        <div class="articlelinks">
            <h1>
                {{.Settings.Title}}
            </h1>
            <div class="sharebuttons">
                <a href="rss.xml" target="_blank" title="Subscribe to RSS feed">
                    <img src="rss.svg" alt="RSS feed icon">
                </a>
            </div>
        </div>
        <input type="text" id="search-input" placeholder="Search..." aria-label="Search articles">
        <section id="search-results-section" aria-live="polite">
            <ul id="search-results"></ul>
        </section>
        <nav>
            {{range .PageList}}
            <a href="{{.LinkToSelf}}" {{if $.Settings.OpenInNewTab}}target="_blank" {{end}}>{{.Title}}</a>
            {{end}}
        </nav>
        <div class="description">
            {{.Settings.DescriptionHTML}}
        </div>
        <div id="buttons"></div>
        <aside></aside>
    </header>
    {{ $Settings := .Settings}}
    <main id="articles-container">
    {{range .ArticleList}}
    {{ $Article := . }}
    <div class="detail">
        <div class="headline">
            <a href="{{.LinkToSelf}}" {{if $Settings.OpenInNewTab}}target="_blank" {{end}}>
                <h2>{{.Title}}</h2>
            </a>
            {{range .Tags}}
            <button class="on" type="button">{{.}}</button>
            {{end}}
            <div class="info">
                <h3 class="date">⋆ {{.Created.Format $Settings.DateFormat}}</h3>
                <h3 class="date">♰ {{.Updated.Format $Settings.DateFormat}}</h3>
            </div>
        </div>
        {{if .CoverImage}}
        <img src="{{.CoverImage}}" alt="{{.Title}}">
        {{end}}
        <p class="description">{{.Description}}</p>

        <div class="sharebuttons">
            <a href="javascript:void(0);" class="share" title="Copy Markdown summary to clipboard"
               onclick="copyMarkdownToClipboard(this)"
               data-title="{{.Title}}"
               data-description="{{.Description}}"
               data-url="{{if .ExternalLink}}{{.ExternalLink}}{{else}}{{$Settings.BaseUrl}}/{{.LinkToSelf}}{{end}}"
               data-image-url="{{if .CoverImage}}{{ absURL .CoverImage $Settings.BaseUrl }}{{end}}"
               data-tags="{{range $i, $tag := .Tags}}{{if $i}},{{end}}{{$tag}}{{end}}">
                <img src="copy.svg" alt="Copy article Markdown summary">
            </a>
            <textarea class="dsbg-raw-text" style="display:none;">{{.TextContent}}</textarea>
            {{range $Settings.ShareButtons}}
            <a href="{{ buildShareUrl .UrlTemplate $Article $Settings }}" target="_blank" rel="noopener noreferrer" title="Share this post on {{ .Name }}" {{if isImage .Display}}class="share"{{end}}>
                {{if isImage .Display}}
                    <img src="{{ genRelativeLink $Article.LinkToSelf .Display }}" alt="Share on {{ .Name }}">
                {{else}}
                    {{.Display}}
                {{end}}
            </a>
            {{end}}
        </div>
    </div>
    {{end}}
    </main>
    <script src="script.js?v={{.Settings.BuildVersion}}" async defer></script>
    {{.Settings.AdditionalElementsBottom}}

    <footer>
        <a href="https://tesserato.github.io/DSBG/" target="_blank">Created with Dead Simple Blog Generator</a>
    </footer>
</body>

</html>